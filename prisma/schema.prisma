generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model classes {
  classId      String         @id @default(uuid())
  className    String         @default("none")
  classSlug    String         @default("none")
  category     String         @default("category")
  fee          Float          @default(0)
  StudentClass StudentClass[]

  @@index([className])
}

model students {
  studentId         String         @id @default(uuid())
  studentName       String         @default("none")
  fatherName        String         @default("none")
  bform             String         @default("0000-0000000-0")
  cnic              String         @default("0000-0000000-0")
  dob               String         @default("none")
  doa               String         @default("none")
  gender            Gender         @default(CUSTOM)
  religion          Religion       @default(MUSLIM)
  tribe             String         @default("none")
  occupation        String         @default("none")
  address           String         @default("none")
  permanentAddress  String         @default("none")
  contact           String         @default("none")
  additionalContact String         @default("none")
  isAssign          Boolean        @default(false)
  discount          Float          @default(0)
  discountbypercent Float          @default(0)
  StudentClass      StudentClass[]
}

model employees {
  employeeId        String   @id @default(uuid())
  employeeName      String   @default("none")
  fatherName        String   @default("none")
  cnic              String   @default("0000-0000000-0")
  fcnic             String   @default("0000-0000000-0")
  dob               String   @default("none")
  doj               String   @default("none")
  gender            Gender   @default(CUSTOM)
  religion          Religion @default(MUSLIM)
  education         String   @default("none")
  address           String   @default("none")
  permanentAddress  String   @default("none")
  contact           String   @default("none")
  additionalContact String   @default("none")
}

model sessions {
  sessionId    String         @id @default(uuid())
  sessionName  String         @default("none")
  sessionFrom  String         @default("none")
  sessionTo    String         @default("none")
  StudentClass StudentClass[]
}

model fees {
  feeId      String  @id @default(uuid())  // Unique identifier, automatically generated UUID
  feeName    String                      // Name of the fee structure
  feeTuition Int                         // Tuition fee amount
  feePaper   Int                         // Paper fund amount
  feeSport   Int                         // Sports fund amount
  feeIdcard  Int                         // ID card fee amount
  feeComm    Int                         // INFO & CALLS fee amount
  createdAt  String         @default("none")
  updatedAt  String         @default("none")
}

model users {
  userId   String @id @default(uuid())
  email    String @unique
  password String
  role     Role

  @@index([email])
}

model StudentClass {
  scId      String   @id @default(uuid())
  studentId String
  classId   String
  sessionId String
  class     classes  @relation(fields: [classId], references: [classId])
  session   sessions @relation(fields: [sessionId], references: [sessionId])
  student   students @relation(fields: [studentId], references: [studentId])
}

enum Gender {
  MALE
  FEMALE
  CUSTOM
}

enum Religion {
  MUSLIM
  CHRISTIAN
  OTHERS
}

enum Role {
  ADMIN
  TEACHER
  CLERK
}
